<ui:composition template="/pageTemplates/master_template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <ui:define name="content">

        <div class="container">

            <div class="row">
                <div class="col-sm-8 panel panel-default" >
                    <!--start review your order<-->
                    <div class="container">
                        
                        <div class="row">
                            <h3>Review your order</h3>
                            <div class="col-sm-4">
                                <label>Shipping Details</label>
                            <br/>
                                <h:outputText value="#{sessionScope['current_user'].firstName}  #{sessionScope['current_user'].lastName}"/>
                                <p>#{sessionScope['current_user'].address1}</p>
                                <p>#{sessionScope['current_user'].city}, #{sessionScope['current_user'].country}</p>
                                <p>#{sessionScope['current_user'].postalCode}</p>
                                <p>#{sessionScope['current_user'].province.province}</p>
                            </div>
                            <div class="col-sm-4">
                                <label>Payment Method</label>

                                <p>Credit card ending in <span>1485</span></p>
                                <p></p>


                            </div>

                        </div>
                    </div>
                    <!--end of review order payment and shipping details<-->

                    <table id="table" class="table">
                        <thead>
                            <tr>
                                <th style="width:80%">Title</th>
                                <th style="width:10%">Price</th>
                                <th style="width:10%"></th>
                            </tr>
                        </thead>
                        
                        <ui:repeat var="b" value="#{sessionScope['cartItems']}" varStatus="index">
                            <tbody>

                                <tr>
                                    <td data-th="Product">
                                        <div class="row">
                                            <div class="col-sm-2 hidden-xs">
<!--                                                <img src="http://placehold.it/100x100" alt="..." class="img-responsive"/>-->
                                            <b:image library="images" name="/books/#{b.isbn}.jpg" tooltip="#{book.genre}"
                                                     style="height:80px;width:80px;"/>

                                            </div>
                                            <div class="col-sm-10">
                                                <h4 class="nomargin"></h4>
                                                <h:outputText value="#{b.title}" /> 

                                            </div>
                                        </div>
                                    </td>
                                    <td data-th="Price" value="">
                                        <div class="col-sm-10">
                                            <h4 class="nomargin"></h4>
                                            <h:outputText value="#{b.salePrice}" /> 

                                        </div>
                                    </td>

                                    <td data-th="Subtotal" class="text-center"></td>
                                    <td class="actions" data-th="">




                                    </td>

                                </tr>
                            </tbody>

                        </ui:repeat>
                        <tfoot>
                            <tr>
                                <td><a href="#" class="btn btn-warning"><i class="fa fa-angle-left"></i> Continue Shopping</a></td>
                                <td colspan="2" class="hidden-xs"></td>
                                <td><a href="#" class="btn btn-success btn-block">Checkout <i class="fa fa-angle-right"></i></a></td>
                            </tr>
                        </tfoot>
                    </table>

                </div>
                <div class="col-sm-4 panel panel-default">
                    <button type="button" class="btn btn-warning" style="width: 100%;margin-top: 10px">Submit Order</button>
                    <p></p>



                    <label>Order Summary</label>
                    <p>Items <span>(#{sessionScope['cartItems'].size()})</span></p>
                    <p>PST <span>#{sessionScope['current_user'].province.PSTrate}</span></p>
                    <p>GST <span>#{sessionScope['current_user'].province.GSTrate}</span></p>
                    <p>Total before taxes: $<span>#{cartBackingBean.generateTotal()}</span></p>
                    <p></p>
                    <p>Taxes:  $<span>#{cartBackingBean.generateTaxTotal()}</span></p>

                    <div style="color: #d9534f ; font-size: 30px">
                        <p>Order Total <span>#{cartBackingBean.generateTotalTaxedSale()}</span></p>
                    </div>

                </div>

            </div>

        </div>

    </ui:define>
</ui:composition>